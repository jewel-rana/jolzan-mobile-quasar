"use strict";(self["webpackChunkjolzan"]=self["webpackChunkjolzan"]||[]).push([[704],{3704:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var s=a(3673),o=a(2323);const i=e=>((0,s.dD)("data-v-38e37309"),e=e(),(0,s.Cn)(),e),r={class:"absolute-bottom text-h6"},n=i((()=>(0,s._)("br",null,null,-1))),l={class:"row"},c={class:"col q-pa-sm"},d={class:"col q-pa-sm"},p={class:"row"},u={class:"col q-pa-sm"},m={class:"col q-pa-sm"},h=i((()=>(0,s._)("div",{class:"text-h6"},"Movies",-1))),g=(0,s.Uk)(" Lorem ipsum dolor sit amet consectetur adipisicing elit. ");function _(e,t,a,i,_,b){const y=(0,s.up)("q-img"),v=(0,s.up)("q-tab"),w=(0,s.up)("q-tabs"),k=(0,s.up)("q-separator"),C=(0,s.up)("q-select"),f=(0,s.up)("item-layout"),T=(0,s.up)("no-result"),$=(0,s.up)("q-tab-panel"),q=(0,s.up)("q-tab-panels"),D=(0,s.up)("q-card-section"),S=(0,s.up)("q-card"),Z=(0,s.up)("cart-section"),I=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(I,null,{default:(0,s.w5)((()=>[e.trip?((0,s.wg)(),(0,s.j4)(S,{key:0,class:"my-card"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{src:e.trip.vehicle_photo||"/images/default-banner.jpg",height:"140px"},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s.Uk)((0,o.zw)(e.trip.vehicle_name)+" ",1),n,(0,s._)("small",null,(0,o.zw)(e.trip.route_name),1)])])),_:1},8,["src"]),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{modelValue:i.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>i.tab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary","narrow-indicator":""},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{name:"mails",label:"Cabin"}),(0,s.Wm)(v,{name:"alarms",label:"Seat"})])),_:1},8,["modelValue"]),(0,s.Wm)(k),(0,s.Wm)(q,{modelValue:i.tab,"onUpdate:modelValue":t[5]||(t[5]=e=>i.tab=e)},{default:(0,s.w5)((()=>[(0,s.Wm)($,{name:"mails"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",c,[(0,s.Wm)(C,{standout:"bg-teal text-white",modelValue:b.cabin_floor,"onUpdate:modelValue":t[1]||(t[1]=e=>b.cabin_floor=e),options:b.floors,label:"Floor"},null,8,["modelValue","options"])]),(0,s._)("div",d,[(0,s.Wm)(C,{standout:"bg-teal text-white",modelValue:b.cabin_type,"onUpdate:modelValue":t[2]||(t[2]=e=>b.cabin_type=e),options:b.cabinTypes,label:"Type"},null,8,["modelValue","options"])])]),e.trip.cabins?((0,s.wg)(),(0,s.j4)(f,{key:0,items:e.trip.cabins},null,8,["items"])):((0,s.wg)(),(0,s.j4)(T,{key:1,msg:"No cabin found"}))])),_:1}),(0,s.Wm)($,{name:"alarms"},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",u,[(0,s.Wm)(C,{standout:"bg-teal text-white",modelValue:b.cabin_floor,"onUpdate:modelValue":t[3]||(t[3]=e=>b.cabin_floor=e),options:b.floors,label:"Floor"},null,8,["modelValue","options"])]),(0,s._)("div",m,[(0,s.Wm)(C,{standout:"bg-teal text-white",modelValue:b.seat_type,"onUpdate:modelValue":t[4]||(t[4]=e=>b.seat_type=e),options:b.seatTypes,label:"Type"},null,8,["modelValue","options"])])]),e.trip.seats?((0,s.wg)(),(0,s.j4)(f,{key:0,items:e.trip.seats},null,8,["items"])):((0,s.wg)(),(0,s.j4)(T,{key:1,msg:"No seat found"}))])),_:1}),(0,s.Wm)($,{name:"movies"},{default:(0,s.w5)((()=>[h,g])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})):((0,s.wg)(),(0,s.j4)(T,{key:1})),(0,s.Wm)(Z)])),_:1})}var b=a(1959);const y=e=>((0,s.dD)("data-v-2986efdc"),e=e(),(0,s.Cn)(),e),v={class:"cabin-layout"},w={class:"cabins"},k={class:"overflow-auto",id:"cabinLayoutContainer"},C=["onClick"],f=y((()=>(0,s._)("div",{class:"topLap"},"AC",-1))),T={key:0,class:"checked-mark"},$={class:"cabin-number"},q={class:"cabin-price"};function D(e,t,a,i,r,n){const l=(0,s.up)("q-icon");return(0,s.wg)(),(0,s.iD)("div",v,[(0,s._)("div",w,[(0,s._)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.items,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"layoutRowCol",key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,o.C_)(["cabin",n.cabinClass(e)]),key:t,onClick:t=>n.addToCard(t,e)},[f,"cabin-selected"===e.cabin_class?((0,s.wg)(),(0,s.iD)("div",T,[(0,s.Wm)(l,{name:"check",size:"18px"})])):(0,s.kq)("",!0),(0,s._)("div",$,(0,o.zw)(e.cabin_no),1),(0,s._)("div",q,"à§³ "+(0,o.zw)(e.fare),1)],10,C)))),128))])))),128))])])])}var S=a(741);const Z={props:["items"],created(){console.log(this.items)},methods:{addToCard(e,t){console.log(t),1==t.status&&"cabin-active"==t.cabin_class&&(this.$parent.$q.loading.show(),this.$store.dispatch("general/addCart",{item:t,token:this.customer_token}).then((()=>{this.$parent.$q.loading.hide(),this.$parent.$q.notify({type:"positive",message:"item has been added to cart"})})).catch((e=>{console.log(e)})))},addToCartDeck(){this.$store.dispatch("general/AddDeckTicketToCart")},cabinClass(e){return e.cabin_class||"empty cursor-not-allowed"},cabinStatus(e){var t="cabin-active";switch(e.status){case"0":t="cabin-active";break;case"1":t="cabin-disable";break}return t}},computed:{...(0,S.rn)("general",["search"])}};var I=a(4260),x=a(4554),V=a(4615),W=a(7518),j=a.n(W);const A=(0,I.Z)(Z,[["render",D],["__scopeId","data-v-2986efdc"]]),Q=A;j()(Z,"components",{QIcon:x.Z,QExpansionItem:V.Z});a(71);const U={key:0,id:"cartContent"},z={class:"row justify-center"},N=(0,s.Uk)("Checkout ");function O(e,t,a,i,r,n){const l=(0,s.up)("q-icon"),c=(0,s.up)("q-btn"),d=(0,s.up)("cart-item"),p=(0,s.up)("q-list"),u=(0,s.up)("no-result");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",{id:"cartSection",class:(0,o.C_)(n.cartSectionDeviceClass)},[(0,s._)("div",{class:"cartPopup cursor-pointer",clickable:"",onClick:t[0]||(t[0]=(...e)=>n.displayCartContent&&n.displayCartContent(...e))},[e.cartContent?((0,s.wg)(),(0,s.j4)(l,{key:1,name:"keyboard_arrow_down",size:"32px"})):((0,s.wg)(),(0,s.j4)(l,{key:0,name:"expand_less",size:"32px"}))]),(0,s.Wm)(c,{flat:"",color:"primary",size:"md",id:"cartExpandButton",icon:"shopping_cart",class:"full-width",onClick:n.displayCartContent},{default:(0,s.w5)((()=>[(0,s.Uk)("Cart ("+(0,o.zw)(e.cart.length)+")",1)])),_:1},8,["onClick"]),e.cartContent?((0,s.wg)(),(0,s.iD)("div",U,[e.cart.length?((0,s.wg)(),(0,s.j4)(p,{key:0,bordered:"",separator:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.cart,((e,t)=>((0,s.wg)(),(0,s.j4)(d,{item:e,index:t},null,8,["item","index"])))),256))])),_:1})):((0,s.wg)(),(0,s.j4)(u,{key:1,msg:"No cart items found"})),(0,s._)("div",z,[e.cart.length?((0,s.wg)(),(0,s.j4)(c,{key:0,type:"submit",loading:e.submitting,class:"q-ma-md",color:"primary",size:"md",onClick:t[1]||(t[1]=e=>n.confirmCart(e))},{default:(0,s.w5)((()=>[N])),_:1},8,["loading"])):(0,s.kq)("",!0)])])):(0,s.kq)("",!0)],2)])}var R=a(5751),E=a(8877);const P={components:{NoResult:R.Z,CartItem:E.Z},created(){const e=localStorage.getItem("cart");e&&this.$store.commit("general/LOAD_CART_ITEMS",JSON.parse(e))},methods:{displayCartContent(){this.$store.commit("general/DISPLAY_CART_CONTENT",!this.cartContent),console.log(this.cartContent)},confirmCart(e){this.$router.push("/cart")},changeBoardingPoint(e,t){this.$store.dispatch("changeBoardingPoint",{id:e.target.value,index:t})}},computed:{vatOption(){return parseInt(this.getOptionByKey("vat_amount"))},cartTotal(){let e=0;for(var t=0;t<this.cart.length;t++)e+=this.cart[t].fare,"customer"===this.cart[t].vat_applicable_to&&(e+=this.cart[t].fare*(this.cart[t].vat_amount/100));return e.toFixed(2)},cartSectionDeviceClass(){return this.$q.screen.lt.md?"cartSectionMobile":"cartSectionDeskTop"},...(0,S.rn)("general",["cart","customer_token","cartContent"]),...(0,S.Se)(["getOptionByKey"])}};var B=a(8240),F=a(7011);const M=(0,I.Z)(P,[["render",O],["__scopeId","data-v-08bb08ae"]]),L=M;j()(P,"components",{QIcon:x.Z,QBtn:B.Z,QList:F.Z});const H={components:{NoResult:R.Z,ItemLayout:Q,CartSection:L},setup(){return{tab:(0,b.iH)("mails")}},created(){let e=localStorage.getItem("cart");e&&this.$store.commit("general/SYNCHRONIZE_WITH_CART_ITEMS",e);const t=localStorage.getItem("trip");console.log(JSON.parse(t)),t?this.$store.commit("general/SET_TRIP_ITEM",{data:JSON.parse(t)}):this.$store.dispatch("general/viewTrip",{id:this.$route.params.id,floor:this.$store.state.general.search.floor.value,cabin_type:this.$store.state.general.search.cabin_type.value,seat_type:this.$store.state.general.search.seat_type.value}).then((()=>{this.$router.push("/booking/"+this.$route.params.id)}))},methods:{cabinStatus(e){let t="cabin-active";switch(e.status){case"0":t="cabin-active";break;case"1":t="cabin-disable";break}return t},loadTrip(){this.$parent.$q.loading.show(),this.$store.dispatch("general/viewTrip",{id:this.$route.params.id,floor:this.search.floor.value||2,cabin_type:this.search.cabin_type.value||0,seat_type:this.search.seat_type.value||0}).then((()=>{this.$parent.$q.loading.hide()}))}},computed:{cabin_type:{get(){return this.$store.state.general.search.cabin_type},set(e){this.$store.commit("general/UPDATE_FORM_DATA",{key:"cabin_type",value:e}),this.$store.dispatch("general/FilterByType",{property:"cabin",type:e.value})}},cabin_floor:{get(){return this.$store.state.general.search.floor},set(e){this.$store.commit("general/UPDATE_FORM_DATA",{key:"floor",value:e}),this.loadTrip()}},seat_type:{get(){return this.$store.state.general.search.seat_type},set(e){this.$store.commit("general/UPDATE_FORM_DATA",{key:"seat_type",value:e}),this.$store.dispatch("general/FilterByType",{property:"seat",type:e.value})}},floors(){return this.trip.floors},cabinTypes(){return this.trip.cabin_types},seatTypes(){return this.trip.seat_types},...(0,S.rn)("general",["trip","search","searchResults"])}};var K=a(4379),Y=a(151),J=a(4027),G=a(5589),X=a(7547),ee=a(8408),te=a(5869),ae=a(5906),se=a(6602),oe=a(3017);const ie=(0,I.Z)(H,[["render",_],["__scopeId","data-v-38e37309"]]),re=ie;j()(H,"components",{QPage:K.Z,QCard:Y.Z,QImg:J.Z,QCardSection:G.Z,QTabs:X.Z,QTab:ee.Z,QSeparator:te.Z,QTabPanels:ae.Z,QTabPanel:se.Z,QSelect:oe.Z})}}]);